(()=>{"use strict";class t{constructor(t,e,i){this.element=document.getElementById(t),this.min=e,this.max=i,this.value=""}getValue(){const t=parseInt(this.element.value);return isNaN(t)?"":t}setValue(t){t<this.min?t=this.min:t>this.max&&(t=this.max),this.value=this.element.value=t}clear(){this.setValue("")}}new class{constructor(){this.radioMetric=document.getElementById("metric"),this.radioImperial=document.getElementById("imperial"),this.radioParent=document.querySelector(".form__radio-group"),this.inputMetric=document.querySelector(".form__input-metric"),this.inputImperial=document.querySelector(".form__input-imperial"),this.boxWelcome=document.querySelector(".form__box-welcome"),this.boxResult=document.querySelector(".form__box-result"),this.resetIcon=document.querySelector(".form__heading-icon"),this.bmiResult=document.querySelector(".form__box-result-heading"),this.spanText=document.querySelector(".form__box-result-span-text"),this.spanWeight=document.querySelector(".form__box-result-span-weight"),this.metric=!0,this.state={metric:{heightCm:new t("heightCm",0,250),weightKg:new t("weightKg",0,500)},imperial:{heightFt:new t("heightFt",0,8),heightIn:new t("heightIn",0,11),weightSt:new t("weightSt",0,75),weightLbs:new t("weightLbs",0,13)},results:{bmi:0,lowerWeight:0,higherWeight:0}},this.inputListener(this.state.imperial),this.inputListener(this.state.metric),this.radioParent.addEventListener("change",this.selectUnit.bind(this)),this.resetIcon.addEventListener("click",this.clearValues.bind(this))}updateUI(t){for(let[e,i]of Object.entries(t))this.showElement(this[e],i)}clearValues(){Object.values(this.state.metric).forEach((t=>t.clear())),Object.values(this.state.imperial).forEach((t=>t.clear())),this.state.results.bmi=0,this.updateUI({boxWelcome:!0,boxResult:!1})}showElement(t,e){e?t.classList.remove("hidden"):t.classList.add("hidden")}selectUnit(){this.metric=!this.metric,console.log(this.metric),this.updateUI({inputMetric:this.metric,inputImperial:!this.metric}),this.displayResult()}inputListener(t){Object.values(t).forEach((t=>{t.element.addEventListener("input",(t=>{this.handleInputChange(t)}))}))}handleInputChange(t){const e=t.target.id,i=this.state.metric[e]||this.state.imperial[e];i&&i.setValue(t.target.value),this.convertUnits(),this.calcBMI()}convertToImperial([t,e]){console.log(t,e);const i=.15747*e,s=Math.trunc(i),h=Math.round(14*(i-s)),r=.393701*t;return{heightFt:Math.trunc(r/12),heightIn:Math.round(r%12),weightSt:s,weightLbs:h}}convertToMetric([t,e,i,s]){console.log(t,e,i,s);const h=Math.round(6.35029*i+.453592*s);return{heightCm:Math.round(2.54*(12*t+e)),weightKg:h}}convertUnits(){const t=this.metric?"metric":"imperial",e=this.metric?"imperial":"metric",i=Object.values(this.state[t]).map((t=>t.getValue())),s=this.metric?this.convertToImperial(i):this.convertToMetric(i);Object.keys(s).forEach((t=>{this.state[e].hasOwnProperty(t)&&this.state[e][t].setValue(s[t])})),console.log(this.state)}calcBMI(){const t=this.state.metric.weightKg.getValue(),e=this.state.metric.heightCm.getValue();e>0&&t>0&&(this.state.results.bmi=Math.round(t/Math.pow(e/100,2)*10)/10,this.calcHealthyWeight())}calcHealthyWeight(){const t=this.state.metric.heightCm.getValue();this.state.results.lowerWeight=18.5*Math.pow(t/100,2),this.state.results.higherWeight=24.9*Math.pow(t/100,2),this.displayResult()}displayResult(){let t=this.state.results.bmi;if(!(t<5||t>100)){switch(this.bmiResult.innerText=t,this.updateUI({boxWelcome:!1,boxResult:!0}),!0){case t<18.5:this.spanText.innerText="underweight";break;case t>=18.5&&t<=24.9:this.spanText.innerText="healthy weight";break;case t>=25&&t<=29.99:this.spanText.innerText="overweight";break;case t>29.99:this.spanText.innerText="obese"}if(this.metric&&(this.spanWeight.innerText=`${this.state.results.lowerWeight.toFixed(1)} kgs - ${this.state.results.higherWeight.toFixed(1)} kgs`),!this.metric){const{weightSt:t,weightLbs:e}=this.convertToImperial([0,this.state.results.lowerWeight]),{weightSt:i,weightLbs:s}=this.convertToImperial([0,this.state.results.higherWeight]);this.spanWeight.innerText=`\n        ${0===e?Math.floor(t)`st`:`${Math.floor(t)} st ${Math.round(e)} lbs`} - ${0===s?Math.floor(i)`st`:`${Math.floor(i)} st ${Math.round(e)} lbs`}`}}}}})();